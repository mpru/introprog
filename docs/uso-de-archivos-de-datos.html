<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Uso de archivos de datos | Introducción a la Programación</title>
<meta name="author" content="Mgs. Lic. Marcos Prunello (Prof. Tit. Ord.)">
<meta name="description" content="Como hemos visto, los programas usan variables para guardar información: datos de entrada, resultados calculados, valores intermedios, etc. Sin embargo, la información guardada en las variables es...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="6 Uso de archivos de datos | Introducción a la Programación">
<meta property="og:type" content="book">
<meta property="og:description" content="Como hemos visto, los programas usan variables para guardar información: datos de entrada, resultados calculados, valores intermedios, etc. Sin embargo, la información guardada en las variables es...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Uso de archivos de datos | Introducción a la Programación">
<meta name="twitter:description" content="Como hemos visto, los programas usan variables para guardar información: datos de entrada, resultados calculados, valores intermedios, etc. Sin embargo, la información guardada en las variables es...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Guía de estudio - Lic. en Estadística - FCEyE - UNR">Introducción a la Programación</a>:
        <small class="text-muted">Guía de estudio - Lic. en Estadística - FCEyE - UNR</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Tabla de contenidos"><h2>Tabla de contenidos</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Bienvenida</a></li>
<li><a class="" href="introducci%C3%B3n-a-la-programaci%C3%B3n.html"><span class="header-section-number">1</span> Introducción a la Programación</a></li>
<li><a class="" href="objetos-y-operadores.html"><span class="header-section-number">2</span> Objetos y operadores</a></li>
<li><a class="" href="estructuras-de-control.html"><span class="header-section-number">3</span> Estructuras de control</a></li>
<li><a class="" href="descomposici%C3%B3n-algor%C3%ADtmica.html"><span class="header-section-number">4</span> Descomposición algorítmica</a></li>
<li><a class="" href="estructuras-de-datos.html"><span class="header-section-number">5</span> Estructuras de Datos</a></li>
<li><a class="active" href="uso-de-archivos-de-datos.html"><span class="header-section-number">6</span> Uso de archivos de datos</a></li>
<li><a class="" href="otros-t%C3%B3picos.html"><span class="header-section-number">7</span> Otros tópicos</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="uso-de-archivos-de-datos" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Uso de archivos de datos<a class="anchor" aria-label="anchor" href="#uso-de-archivos-de-datos"><i class="fas fa-link"></i></a>
</h1>
<p>Como hemos visto, los programas usan variables para guardar información: datos de entrada, resultados calculados, valores intermedios, etc. Sin embargo, la información guardada en las variables es efímera. Cuando los programas paran de correr, el valor almacenado en las variables se pierde. En muchas ocasiones, es necesario guardar información de una forma más permanente.</p>
<p>En estos casos, el enfoque usual es recolectar la información en un todo lógicamente cohesivo y guardarlo en un medio permanente que generalmente se graba en el disco rígido de la máquina, es decir, en un archivo. Un <strong>archivo</strong> o <strong>fichero</strong> es un conjunto de información sobre un mismo tema tratado como una unidad de almacenamiento y organizado de forma estructurada para la búsqueda de un dato individual. Los archivos pueden contener instrucciones de programas o información creada o usada por un programa. Todos los objetos de datos permanentes que guardamos en nuestra computadora (documentos, juegos, programas ejecutables, código, etc.) son guardados en la forma de archivos.</p>
<p>Un archivo se identifica con un <strong>nombre</strong>, seguido por un <em>punto</em> y una <strong>extensión</strong>, la cual es un sufijo empleado para indicar características de su contenido, el uso pretendido o el software con el cual puede ser empleado. Por ejemplo, un archivo que se llama <em>planilla.xlsx</em> es una hoja de cálculo de Excel o un archivo llamado <em>codigo.R</em> es un script de código de R.</p>
<div id="registros-campos-claves-y-bases-de-datos" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Registros, campos, claves y bases de datos<a class="anchor" aria-label="anchor" href="#registros-campos-claves-y-bases-de-datos"><i class="fas fa-link"></i></a>
</h2>
<p>En esta asignatura nos limitaremos a trabajar con archivos que guardan información de forma tabular, en los que la unidad elemental que los compone es un <strong>registro</strong>, es decir, una colección de información relativa a una misma entidad. En general, cada registro de un mismo archivo tiene la misma estructura que los demás. Los datos individuales sobre dicha entidad se organizan en <strong>campos</strong>. Un <strong>campo</strong> es la mínima unidad de información de un registro. Por ejemplo:</p>
<pre><code>ARCHIVO: Pasajeros
Campo 1 - Pasaporte: número de pasaporte del pasajero, tipo caracter
Campo 2 - Nombre: nombre del pasajero, tipo caracter
Campo 3 - NroVuelo: número del vuelo, tipo caracter
Campo 4 - FechaVuelo: fecha del vuelo, tipo caracter
Campo 5 - NroAsiento: número del asiento, tipo caracter
Campo 6 - Origen: ciudad de origen, tipo caracter
Campo 7 - Destino: ciudad de destino, tipo caracter
Campo 8 - Precio: precio del pasaje, tipo numérico</code></pre>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="center">Pasaporte</th>
<th align="center">Nombre</th>
<th align="center">NroVuelo</th>
<th align="center">FechaVuelo</th>
<th align="center">NroAsiento</th>
<th align="center">Origen</th>
<th>Destino</th>
<th>Precio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">AAA235687</td>
<td align="center">Pamela Suárez</td>
<td align="center">AR6071</td>
<td align="center">12/09/17</td>
<td align="center">17A</td>
<td align="center">Rosario</td>
<td>Córdoba</td>
<td>7532.23</td>
</tr>
<tr class="even">
<td align="center">BCA587681</td>
<td align="center">Gonzalo Echarri</td>
<td align="center">AR5423</td>
<td align="center">14/09/17</td>
<td align="center">31B</td>
<td align="center">Rosario</td>
<td>Buenos Aires</td>
<td>6424.10</td>
</tr>
<tr class="odd">
<td align="center">…</td>
<td align="center">…</td>
<td align="center">…</td>
<td align="center">…</td>
<td align="center">…</td>
<td align="center">…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table></div>
<p><br></p>
<p>Un campo está caracterizado por el tipo de datos que almacena (caracter, numérico, lógico) y en algunos contextos es necesario precisar su longitud (por ejemplo, cantidad de caracteres admitidos como máximo en los datos del campo). Algunos lenguajes, como R, admiten trabajar con campos de longitud variable (sin necesidad de que sea especificada con anticipación).</p>
<p>En el contexto del análisis de datos, cada columna o <em>campo</em> en este tipo de archivos puede representar una variable observada sobre los individuos o unidades de interés, los cuales se encuentran dispuestos en las sucesivas filas.</p>
<p>Generalmente suele ser necesario identificar de manera única a cada registro de un archivo. Para esto suele considerarse a uno de los campos del archivo como el <strong>campo clave</strong> o, más sencillamente, <strong>clave</strong>. La <strong>clave</strong> o <em>key</em> es el campo que identifica inequívocamente a cada registro, permitiendo diferenciarlo del resto, como podría ser el número de pasaporte en el ejemplo anterior. En ocasiones donde no hay un campo <em>clave</em> es posible identificar un registro a través de la combinación de los valores presentes en más de uno de los campos.</p>
<p>Por último, cabe mencionar que llamamos <strong>base de datos</strong> a un conjunto de archivos que contienen datos relacionados entre sí, vinculados mediante sistemas complejos que enlazan las claves de uno y otro archivo y que pueden ser consultados mediante el uso de software especializado. Por eso, cuando trabajamos con los datos almacenados en un único archivo, es conveniente referirse a los mismos como “conjunto de datos” y no como “base de datos”.</p>
</div>
<div id="organización-de-archivos" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Organización de archivos<a class="anchor" aria-label="anchor" href="#organizaci%C3%B3n-de-archivos"><i class="fas fa-link"></i></a>
</h2>
<p>Existen distintos tipos de organización de los archivos según la forma en la que se pueda acceder a cada uno de sus registros:</p>
<ul>
<li>
<p><strong>Organización secuencial</strong></p>
<p>Los registros se encuentran en cierto orden que debe ser respetado para la lectura de los mismos. Para leer el registro situado en la posición <em>n</em>, el programa previamente tiene que pasar por los <em>n-1</em> registros que ocupan las posiciones anteriores.</p>
<p>Los archivos de tipo secuencial en general ocupan menos memoria y suelen ser utilizados para guardar contenidos que sufren pocas modificaciones. Los registros se graban consecutivamente en el soporte que los aloja (por ejemplo, en el disco). El orden físico con el que fueron escritos los registros coincide con el orden de lectura de los mismos.</p>
<p>Los registros pueden leerse uno por uno hasta llegar al final del archivo, donde se indica de alguna manera el fin del mismo, muchas veces a través de un caracter especial como un asterisco o de una línea en blanco. Esta marca generalmente se conoce como <em>EOF</em> (<em>end of file</em>). La mayoría de los lenguajes de programación disponen de una función lógica que devuelve un valor <code>VERDADERO</code> cuando se alcanza el final del archivo.</p>
<!-- Los archivos de tipo secuencial en general ocupan menos memoria, su uso no requiere establecer con anterioridad la cantidad de registros a almacenar y suelen ser utilizados para guardar contenidos que sufren pocas modificaciones. -->
</li>
<li>
<p><strong>Organización directa</strong></p>
<p>Son archivos que están organizados de manera que se pueda acceder de forma directa a cada registro mediante su posición en el soporte físico que lo contiene, sin tener que pasar secuencialmente por los registros anteriores. Poseen la ventaja de brindar un acceso rápido a la información y la posibilidad de leer y escribir registros en cualquier posición y orden.</p>
<p>Se puede mencionar como desventaja de este tipo de organización el hecho de que requiere la programación de la forma de identificar la posición de un registro a partir de alguno de los valores de sus campos, generalmente, la <em>clave</em>. Esto se hace mediante un algoritmo de transformación de la clave (llamado <em>hash function</em>) que a partir de la misma devuelve la dirección del registro en el soporte físico. El archivo debe diseñarse teniendo en cuenta de antemano una cantidad total de registros fija.</p>
</li>
<li>
<p><strong>Organización indexada</strong></p>
<p>Los archivos están estructurados de manera que los registros se pueden localizar sin pasar por los anteriores, consultando en una tabla adicional de índices la zona del archivo donde se encuentra el registro buscado. Esto permite localizar un registro por medio de su clave o del valor de algún campo en particular.</p>
<p>Para imaginarnos esto, podemos pensar que un diccionario es un ejemplo de un archivo indexado, ya que podemos encontrar la región donde se encuentra un registro (palabra) mediante el índice de letras. Si queremos buscar el término “programación” en un diccionario, no recorremos todas las palabras del mismo desde la “A” hasta encontrar el término de interés, sino que buscamos en el índice en qué página del diccionario se encuentra la “P” y comenzamos una búsqueda secuencial desde la misma.</p>
<p>Un archivo indexado, entonces, cuenta en realidad con dos archivos, uno de índices (que se recorre de forma secuencial) y otro con los registros propiamente dichos. Posee la ventaja de brindar un rápido acceso a los registros, pero con el costo de utilizar espacio adicional para la tabla de índices.</p>
</li>
</ul>
<p>La organización más sencilla y más comúnmente empleada es la <strong>secuencial</strong>, aunque en algunos casos puede no ser la más eficiente. Si bien no todos los lenguajes de programación permiten el trabajo con archivos indexados o de organización directa, todos pueden manejar archivos secuenciales.</p>
<p>En este curso trabajaremos solamente con archivos cuyos registros estén organizados de forma secuencial y que puedan ser registrados como documentos de Excel (extensión <em>.xlsx</em>) o archivos de texto (extensión <em>.txt</em> o <em>.csv</em>).</p>
<p>Un <strong>archivo de texto</strong> (también conocido como <em>texto llano</em> o <em>texto simple</em>) es un archivo informático que contiene únicamente texto formado por una secuencia ordenada de caracteres. El texto almacenado en este tipo de archivo carece de cualquier tipo de formato tipográfico (negrita, cursiva, colores, subrayado, fuente, etc.), lo cual permite que una gran variedad de programas pueda leer y editar el contenido. Cada renglón en el archivo de texto es un registro y los distintos campos suelen estar señalizados con tabulaciones (archivos <em>.txt</em>) o separados por comas o punto y comas (archivos <em>.csv</em>).</p>
<p>Los archivos de texto están compuestos por caracteres ordinarios, como las letras, números y signos de puntuación, y por caracteres especiales que indican, por ejemplo, saltos de línea (<code>\n</code>) y tabulaciones (<code>\t</code>). Pero como en realidad las computadoras solamente entienden números, cada caracter es codificado internamente con una representación numérica binaria, que nosotros nunca llegamos a ver. Distintas maneras de hacer esta representación dan lugar a diferentes formatos de codificación de caracteres (como <em>ASCII</em>, <em>ISO-8859-1</em> o <em>UTF-8</em>). Si en alguna oportunidad abrimos un archivo y nos percatamos que caracteres como la “ñ” o las tildes han sido reemplazadas por otros produciendo un aspecto “raro”, significa que el archivo ha sido abierto empleando una codificación diferente de la que se utilizó al crear el archivo. La solución para este problema es muy sencilla, sólo hay que cambiar la opción de codificación a la hora de guardar o de abrir el archivo.</p>
</div>
<div id="operaciones-sobre-archivos" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Operaciones sobre archivos<a class="anchor" aria-label="anchor" href="#operaciones-sobre-archivos"><i class="fas fa-link"></i></a>
</h2>
<p>El uso de archivos en programación es muy importante ya que nos permite leer datos para hacer algún tipo de procesamiento y también guardar resultados obtenidos. El sistema operativo de la computadora es el que se encarga de manipular los archivos para que podamos leerlos o escribir en ellos, pero debemos aprender las sentencias que el lenguaje de programación elegido utiliza para encargarle esas tareas al sistema operativo. Además, necesitamos elegir una forma clara para comunicar estas acciones mediante pseudocódigo en los algoritmos.</p>
<p>Los procedimientos básicos que los programas pueden llevar a cabo sobre los distintos tipos de archivos son:</p>
<ul>
<li>
<p><strong>Creación de un archivo</strong></p>
<p>Para que un archivo pueda ser utilizado, antes tiene que existir, obviamente. Si bien la creación de un nuevo archivo es una tarea propia del sistema operativo, la representaremos en el pseudocódigo de la siguiente forma, donde <code>nombre</code> puede ser reemplazado por cualquier nombre que deseemos darle al archivo:</p>
<pre><code>  CREAR ARCHIVO (nombre)</code></pre>
<p>Una vez que el archivo fue creado y existe, se pueden hacer con él las restantes operaciones. En la mayoría de las aplicaciones que veremos, tendremos archivos que han sido creados con anterioridad y ya tienen registros, por lo cual usaremos pocas veces esta acción.</p>
</li>
<li>
<p><strong>Apertura de un archivo</strong></p>
<p>Para que un programa pueda operar sobre un archivo, la primera acción que debe realizar es la <strong>apertura</strong> del mismo, que incluye la identificación del archivo a utilizar y el modo (lectura o escritura). Esto hace que el sistema operativo establezca una <em>conexión</em> con el archivo que mientras se mantenga activa permitirá la lectura y escritura de registros en el mismo. En pseudocódigo lo indicaremos así:</p>
<pre><code>ABRIR ARCHIVO (nombre) secuencial, lectura
ABRIR ARCHIVO (nombre) secuencial, escritura</code></pre>
</li>
<li>
<p><strong>Lectura de registros en un archivo</strong></p>
<p>La <strong>lectura</strong> consiste en transferir información del archivo a la memoria principal usada por el programa. En los archivos de organización secuencial, los registros se leen uno por uno, es decir, línea por línea, hasta llegar al final del archivo. Veremos dos formas de indicar en nuestro pseudocódigo la lectura de todos los registros de un archivo.</p>
<p><em>Opción A: registro por registro</em></p>
<p>Por ejemplo, si deseamos realizar alguna o algunas acciones con los valores que forman parte de cada registro mientras el archivo es recorrido secuencialmente línea por línea, podemos emplear una estructura iterativa:</p>
<pre><code>MIENTRAS FIN DE ARCHIVO (nombre) == FALSO ENTONCES
  LEER SIGUIENTE REGISTRO (nombre) campo1, campo2, ...  
  ... realizar operaciones con las variables campo1, campo2, ...
FIN MIENTRAS</code></pre>
<p>En cada iteración se lee un registro con la expresión <code>LEER SIGUIENTE REGISTRO (nombre)</code>. <code>campo1</code> y <code>campo2</code> son variables que se definen para representar a los valores leídos de cada uno de los campos (columnas) en el registro que está siendo analizado. Luego de ser leídos, con esos valores se pueden realizar distintas acciones, antes de proseguir con la lectura del siguiente registro.</p>
<p>Al ir recorriendo cada línea del archivo, la expresión <code>FIN DE ARCHIVO (nombre)</code> devuelve el valor <code>FALSO</code>, pero después de haber leído el último registro, devolverá <code>VERDADERO</code>. Esto indica que se ha llegado al final, no quedan registros por leer y se debe detener la estructura iterativa. <code>FIN DE ARCHIVO (nombre)</code> también suele indicarse con <code>EOF (nombre)</code>.</p>
<p><em>Opción B: lectura completa</em></p>
<p>Otra opción es leer automáticamente todos los registros y almacenarlos en alguna estructura de datos especializada que definamos en el ambiente de trabajo. Para esto, vamos a introducir la noción de <strong>dataset</strong>: una estructura de datos bidimensional (como una matriz) en la cual cada fila representa a un registro y cada columna representa a uno de los campos del archivo, pudiendo entonces almacenar valores de distinto tipo en cada una de ellas (numérico, lógico, caracter). Para indicar que todo el contenido del archivo (llamado <code>nombre</code>) debe ser leído y almacenado en un dataset llamado, por ejemplo, <em>datos</em>, emplearemos la siguiente expresión:</p>
<pre><code>LEER REGISTROS (nombre) A DATASET (datos)</code></pre>
<p>Una vez que los registros fueron leídos y almacenados en el dataset, podemos hacer referencia a cada uno de ellos utilizando <em>índices</em> como lo hacemos con las matrices. Por ejemplo, <code>datos[3, 4]</code> hace referencia al valor correspondiente al cuarto campo en el tercer registro. Así, podemos recorrer todos los registros del dataset con una estructura iterativa para realizar distintas operaciones con ellos:</p>
<pre><code>LEER REGISTROS (nombre) A DATASET (datos)

PARA i DESDE 1 HASTA NFILA(datos) HACER
    ...realizar operaciones con  datos[i, 1], datos[i, 2], etc. ...
FIN PARA</code></pre>
</li>
<li>
<p><strong>Escritura en un archivo</strong></p>
<p>La <strong>escritura</strong> es la transferencia de información guardada en las variables del programa al archivo. Si el archivo fue abierto en modo de escritura, con la siguiente expresión representamos el agregado de un nuevo registro al final del mismo, donde <code>valor1</code>, <code>valor2</code>, etc. son los valores que se guardarán en los respectivos campos del archivo, respetando el orden.</p>
<pre><code>  ESCRIBIR REGISTRO (nombre) valor1, valor2, ...</code></pre>
</li>
<li>
<p><strong>Cierre de un archivo</strong></p>
<p>Cuando un programa no vaya a acceder más a un archivo, es necesario indicarlo a través del <strong>cierre</strong> del mismo, para que se interrumpa la conexión establecida por el sistema operativo. Esto hace que se liberen memoria y recursos del sistema, se prevenga la corrupción de los datos y se exprese explícitamente que ya no se hará más uso del mismo. En pseudocódigo lo indicaremos así:</p>
<pre><code>CERRAR ARCHIVO (nombre)</code></pre>
</li>
<li>
<p><strong>Otras operaciones</strong></p>
<p>Otras operaciones que se pueden realizar sobre los archivos, en base a combinaciones de las anteriores, incluyen a las acciones de:</p>
<ul>
<li>
<em>Actualización</em>: añadir (dar de alta), modificar o eliminar (dar de baja) algún registro.</li>
<li>
<em>Clasificación</em>: reubicar los registros de tal forma que queden ordenados por algún campo determinado.</li>
<li>
<em>Fusión o mezcla</em>: combinar dos o más archivos para formar uno nuevo.</li>
<li>
<em>Partición</em>: subdividir los registros por el valor que toman en algún campo para generar más de un archivo.</li>
</ul>
</li>
</ul>
</div>
<div id="ejemplo" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Ejemplo<a class="anchor" aria-label="anchor" href="#ejemplo"><i class="fas fa-link"></i></a>
</h2>
<p>El archivo <code>reservas.txt</code> cuenta con los registros de reservas en un famoso hotel de la ciudad de Rosario durante el año 2019. Cada registro del archivo dispone de información acerca del mes de la reserva, tipo de habitación reservada y cantidad de noches de la estadía:</p>
<ul>
<li><p>Archivo: <code>reservas.txt</code></p></li>
<li>
<p>Campos:</p>
<ul>
<li>
<code>tipohab</code>: tipo de habitación, numérico (1 = habitación simple, 2 = habitación doble, 3 = habitación triple)<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;El campo es de tipo numérico porque contiene valores de ese tipo, sin embargo el tipo de habitación es una variable categórica. No debemos confundir estos aspectos.&lt;/p&gt;"><sup>23</sup></a>.</li>
<li>
<code>mes</code>: mes en el que se realizó la reserva, numérico (1 = enero, …, 12 = diciembre).</li>
<li>
<code>noches</code>: cantidad de noches reservadas, numérico.</li>
</ul>
</li>
</ul>
<p>Como ilustración, se muestran los primeros registros del archivo:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-143"></span>
<img src="images/06_archivos/arch00.png" alt="Primeros registros del archivo reservas.txt" width="30%"><p class="caption">
Figura 6.1: Primeros registros del archivo reservas.txt
</p>
</div>
<p>La primera línea de este archivo de texto contiene los nombres de los campos. La segunda línea contiene los datos correspondientes al registro, que se trata de una reserva para una habitación triple (<code>tipohab</code> es igual a 3), en el mes de enero (<code>mes</code> es igual a 1) y por 1 noche (<code>noches</code> es igual a 1).</p>
<p>Se necesita crear un programa que permita obtener los siguientes resultados:</p>
<ol style="list-style-type: lower-alpha">
<li>
<p>Generar la siguiente tabla de contingencia que presenta el número de reservas durante el año 2019 según mes y tipo de habitación:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="center"></th>
<th align="center">Hab. simple</th>
<th align="center">Hab. doble</th>
<th align="center">Hab. triple</th>
<th align="center">Total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Enero</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">…</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="center">Diciembre</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">Total</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
</li>
<li><p>Determinar el total de pernoctaciones en el hotel durante el 2019, es decir, la cantidad total de noches que los huéspedes se alojaron en el establecimiento (información que cada hotel debe comunicar a la secretaría de turismo de la municipalidad).</p></li>
<li><p>Determinar cuál fue el mes de mayor cantidad de reservas.</p></li>
<li><p>Determinar para cada tipo de habitación el mes con menor número de reservas.</p></li>
</ol>
<p>En <a href="https://github.com/mpru/introprog/tree/master/archivos">este link</a> o en el aula virtual podrás encontrar el archivo de datos. Al final de esta sección se presenta el algoritmo y el programa en R que resuelven este problema, pero antes iremos explicando cada parte por separado.</p>
<div id="lectura-de-los-registros-del-archivo" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> Lectura de los registros del archivo<a class="anchor" aria-label="anchor" href="#lectura-de-los-registros-del-archivo"><i class="fas fa-link"></i></a>
</h3>
<p>En el pseudocódigo, la lectura de los registros comienza con la apertura del archivo. Luego, se recurre a la estrategia de leer todos los registros automáticamente, almacenándolos en una estructura de datos de tipo <em>dataset</em>, a la que se le da el nombre <code>datos</code>. Una vez que la lectura es realizada, se cierra el archivo y exploramos cuántos registros (filas) y campos (columnas o variables) tiene el dataset:</p>
<pre><code>ABRIR ARCHIVO (reservas) secuencial, lectura
LEER REGISTROS (reservas) A DATASET (datos)
CERRAR ARCHIVO (reservas)
ESCRIBIR "El archivo cuenta con" NFILA(datos) "registros de" NCOL(datos) "campos." </code></pre>
<p>En R, podemos leer todos los registros de un archivo de texto con campos separados por tabulaciones con la función <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code>, informando la ruta completa hasta la ubicación del archivo en la computadora. Por ejemplo:</p>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span><span class="op">(</span><span class="st">"/home/marcos/GitProjects/introprog/archivos/reservas.txt"</span><span class="op">)</span></code></pre></div>
<!-- Si tenemos que importar otro tipo de archivo (por ejemplo, de Excel o de texto separado con comas) y no nos acordamos cuál es la función que permite hacerlo, podemos recurrir al menú de importación de datos mediante el botón `Import Dataset` en el panel `Environment` de RStudio (arriba a la derecha). Ahí podremos elegir distintas opciones para la importación y automáticamente se generará y correrá el código de R necesario, el cual debemos copiar y pegar en nuestro script para dejar sentado cómo se realizó la importación. -->
<p>RStudio provee asistencia para la importación de datos mediante el botón <code>Import Dataset</code> en el panel <code>Environment</code>. Sin embargo, para este curso es importante que dichas opciones no sean utilizadas y los datos sean leídos mediante el código propuesto anteriormente. Esto se debe a que algunas de las opciones provistas por RStudio producen estructuras para almacenar datos con ciertas propiedades que imposibilitan la indexación con corchetes tal como la hemos implementado hasta el momento.</p>
<p>Una vez completo este paso, en el ambiente podremos ver listado un nuevo objeto llamado <code>datos</code>, junto con una breve descripción del mismo que nos dice que tiene 3853 observaciones (registros) de 3 variables (campos). Si hacemos clic sobre el nombre del objeto se abrirá una pestaña para que podamos explorar su contenido.</p>
<p>Si bien a simple vista parece una matriz numérica como las que ya habíamos utilizado, no lo es. Este objeto es un <em>dataset</em>, lo cual significa que sus columnas pueden tener distintos tipos de datos (numérico, caracter, lógico). Más específicamente, si le preguntamos a R de qué tipo de objeto se trata, nos indicará que es un <code>data.frame</code>, que es el término que utiliza R para referirse a los conjuntos de datos. Así como tenemos objetos que pueden ser numéricos, lógicos o caracter, vectores, matrices o listas, hay de estos otros objetos que son de tipo <code>data.frame</code>:</p>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "data.frame"</code></pre>
<p>Existen algunas funciones de R que nos permiten explorar el contenido de un dataset:</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra los nombres de las columnas (campos del archivo)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "tipohab" "mes"     "noches" </code></pre>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra la "estructura" interna del dataset</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>'data.frame':   3853 obs. of  3 variables:
 $ tipohab: int  3 2 1 2 3 2 1 1 2 3 ...
 $ mes    : int  1 1 1 1 1 1 1 1 1 1 ...
 $ noches : int  1 12 4 7 6 1 5 4 7 1 ...</code></pre>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra la cantidad de filas y columnas</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3853    3</code></pre>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra la cantidad de filas</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3853</code></pre>
<div class="sourceCode" id="cb398"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra la cantidad de columnas</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra los primeros registros</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>  tipohab mes noches
1       3   1      1
2       2   1     12
3       1   1      4
4       2   1      7
5       3   1      6
6       2   1      1</code></pre>
<div class="sourceCode" id="cb402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra los últimos registros</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>     tipohab mes noches
3848       3  12     10
3849       1  12      8
3850       3  12      1
3851       2  12      6
3852       1  12      8
3853       2  12      8</code></pre>
<div class="sourceCode" id="cb404"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra un resumen de cada campo</span>
<span class="co"># No siempre tiene sentido (por ejemplo, calcula la media de "tipohab")</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></code></pre></div>
<pre><code>    tipohab           mes             noches      
 Min.   :1.000   Min.   : 1.000   Min.   : 1.000  
 1st Qu.:1.000   1st Qu.: 3.000   1st Qu.: 2.000  
 Median :1.000   Median : 7.000   Median : 5.000  
 Mean   :1.671   Mean   : 6.412   Mean   : 5.015  
 3rd Qu.:2.000   3rd Qu.: 9.000   3rd Qu.: 7.000  
 Max.   :3.000   Max.   :12.000   Max.   :12.000  </code></pre>
<p>Detalles de lectura opcional:</p>
<ul>
<li><p>Internamente, un <code>data.frame</code> es sencillamente una lista, compuesta por vectores de distinto tipo que tienen todos el mismo largo y que se organizan como columnas. Además, esta lista es almacenada junto con cierta información adicional (<em>atributos</em>) que nos permiten manipularla como una estructura tabular.</p></li>
<li>
<p>Importar un archivo no es la única forma de crear un <code>data.frame</code>, también se puede crear uno de forma “manual”, por ejemplo:</p>
<div class="sourceCode" id="cb406"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mis_datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
    nombre <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ale"</span>, <span class="st">"Marti"</span>, <span class="st">"Edu"</span><span class="op">)</span>,
    edad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">21</span>, <span class="fl">20</span>, <span class="fl">22</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">mis_datos</span></code></pre></div>
<pre><code>  nombre edad
1    Ale   21
2  Marti   20
3    Edu   22</code></pre>
</li>
</ul>
</div>
<div id="recorrer-todos-los-registros-para-obtener-la-info-necesaria" class="section level3" number="6.4.2">
<h3>
<span class="header-section-number">6.4.2</span> Recorrer todos los registros para obtener la info necesaria<a class="anchor" aria-label="anchor" href="#recorrer-todos-los-registros-para-obtener-la-info-necesaria"><i class="fas fa-link"></i></a>
</h3>
<p>Una vez leído el archivo, vamos a continuar con los puntos pedidos. El primero de ellos pedía generar un cuadro con el conteo de la cantidad de reservas en cada mes y según el tipo de habitación, incluyendo los totales marginales y el total general. Por otro lado, para el punto b necesitamos sumar el número de noches en cada reserva. Será necesario, entonces, recorrer todos los registros guardados en el dataset <code>datos</code> e ir realizando los conteos correspondientes.</p>
<p>El paso más importante es diseñar todas las estructuras de datos que necesitaremos para almacenar esta información. Una buena idea es agarrar papel y lápiz y hacer un bosquejo, por ejemplo, como el que sigue:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-149"></span>
<img src="images/06_archivos/arch01.png" alt="Bosquejo de las estructuras de datos necesarias" width="100%"><p class="caption">
Figura 6.2: Bosquejo de las estructuras de datos necesarias
</p>
</div>
<p>En la figura anterior se señalan los vectores y matrices necesarios para cumplir con el objetivo. Por ahora, nos concentraremos en obtener los conteos y acumular la cantidad de noches. Más adelante, veremos cómo unir todos los resultados y poner nombres de filas y columnas.</p>
<p>Vamos a declarar la existencia de una matriz numérica llamada <code>tabla</code> con 12 filas (para los meses) y 3 columnas (tipos de habitación) para almacenar los conteos; dos vectores <code>total_fila</code> y <code>total_col</code> para los totales marginales; y una variable <code>pernoc</code> para ir sumando el número de noches:</p>
<pre><code># Pseudocódigo
VARIABLE numérica pernoc, tabla(12, 3), total_fila(12), total_col(3)
pernoc &lt;- 0</code></pre>
<div class="sourceCode" id="cb409"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># En R</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">total_fila</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span>
<span class="va">total_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="va">pernoc</span> <span class="op">&lt;-</span> <span class="fl">0</span></code></pre></div>
<p>Analicemos ahora el primer registro. En la primera fila del dataset tenemos que el tipo de habitación es triple (<code>tipohab</code> es 3), que la reserva se hizo en enero (<code>mes</code> es 1) y que sólo consistió de una noche (<code>noches</code> es 1), como lo podemos verificar a continuación:</p>
<div class="sourceCode" id="cb410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># La columna 1 corresponde al tipo de habitación</span>
<span class="va">datos</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># La columna 2 corresponde al mes de la reserva</span>
<span class="va">datos</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb414"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># La columna 3 corresponde a la cantidad de noches</span>
<span class="va">datos</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>Entonces, para completar la tabla de conteos, debemos sumar un 1 para contar este caso en la celda que corresponde a la fila 1 (enero) y columna 3 (habitación triple). Además, debemos ir sumando la cantidad de noches:</p>
<pre><code># +1 en [1, 3] porque es una reserva en enero y habitación triple
tabla[1, 3] &lt;- tabla[1, 3] + 1      

# +1 en pernoc porque la reserva consistió de una sola noche
pernoc &lt;- pernoc + 1</code></pre>
<p>Si al inicio del algoritmo declaramos las variables numéricas <code>tipohab</code>, <code>mes</code> y <code>noches</code>, lo anterior puede ser escrito de manera un poco más general así:</p>
<pre><code># Pseudocódigo y R:
tipohab &lt;- datos[1, 1]      # El tipo de habitación es triple (3)
mes &lt;- datos[1, 2]          # El mes es enero (1)
noches &lt;- datos[1, 3]       # La reserva fue por una noche

tabla[mes, tipohab] &lt;- tabla[mes, tipohab] + 1
pernoc &lt;- pernoc + noches</code></pre>
<p>Si hacemos lo anterior con cada uno de los registros, podremos obtener los conteos y la suma deseada. Eso lo podemos automatizar con una estructura iterativa. Además, no debemos olvidarnos de que también tenemos que calcular los totales marginales:</p>
<pre><code># Pseudocódigo
PARA i DESDE 1 HASTA NFILA(datos) HACER
  
  tipohab &lt;- datos[i, 1]
  mes &lt;- datos[i, 2]
  noches &lt;- datos[1, 3]
  
  tabla[mes, tipohab] &lt;- tabla[mes, tipohab] + 1
  pernoc &lt;- pernoc + noches
  total_fila[mes] &lt;- total_fila[mes] + 1
  total_col[tipohab] &lt;- total_col[tipohab] + 1
  
FIN PARA</code></pre>
<div class="sourceCode" id="cb419"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># En R</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    
    <span class="va">tipohab</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">1</span><span class="op">]</span>
    <span class="va">mes</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">2</span><span class="op">]</span>
    <span class="va">noches</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span>
    
    <span class="va">tabla</span><span class="op">[</span><span class="va">mes</span>, <span class="va">tipohab</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">tabla</span><span class="op">[</span><span class="va">mes</span>, <span class="va">tipohab</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="va">pernoc</span> <span class="op">&lt;-</span> <span class="va">pernoc</span> <span class="op">+</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">3</span><span class="op">]</span>
    <span class="va">total_fila</span><span class="op">[</span><span class="va">mes</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">total_fila</span><span class="op">[</span><span class="va">mes</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="va">total_col</span><span class="op">[</span><span class="va">tipohab</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">total_col</span><span class="op">[</span><span class="va">tipohab</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    
<span class="op">}</span>

<span class="co"># Resultados: </span>
<span class="va">tabla</span></code></pre></div>
<pre><code>      [,1] [,2] [,3]
 [1,]  200  129   72
 [2,]  202   98   80
 [3,]  131   70   35
 [4,]  113   61   40
 [5,]  169   91   61
 [6,]  139   78   61
 [7,]  298  179  112
 [8,]  105   85   41
 [9,]  138   95   35
[10,]  181   99   67
[11,]   99   68   36
[12,]  200  119   66</code></pre>
<div class="sourceCode" id="cb421"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">total_fila</span></code></pre></div>
<pre><code> [1] 401 380 236 214 321 278 589 231 268 347 203 385</code></pre>
<div class="sourceCode" id="cb423"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">total_col</span></code></pre></div>
<pre><code>[1] 1975 1172  706</code></pre>
<div class="sourceCode" id="cb425"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pernoc</span></code></pre></div>
<pre><code>[1] 19323</code></pre>
<p>Ya casi tenemos la tabla pedida, sólo queda acomodar todas estas cositas para formar un lindo cuadro.</p>
</div>
<div id="a-mostrar-el-cuadro" class="section level3" number="6.4.3">
<h3>
<span class="header-section-number">6.4.3</span> a) Mostrar el cuadro<a class="anchor" aria-label="anchor" href="#a-mostrar-el-cuadro"><i class="fas fa-link"></i></a>
</h3>
<p>Tenemos que anexarle a <code>tabla</code> los totales fila, los totales columna, el total general y los nombres de fila y columna para poder completar el pedido. Vamos a empezar por definir vectores de tipo caracter que tengan todos los meses del año y los tipos de habitación, para usarlos como nombres de filas y columnas más adelante:</p>
<pre><code># Pseudocódigo
VARIABLE caracter tipos(3), meses(12)
tipos[1] &lt;- "Simple"
tipos[2] &lt;- "Doble"
tipos[3] &lt;- "Triple"
meses[1] &lt;- "Enero"
meses[2] &lt;- "Febrero"
...
meses[12] &lt;- "Diciembre"</code></pre>
<div class="sourceCode" id="cb428"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># En R</span>
<span class="co"># Crear un vector caracter con todos los nombres de los meses</span>
<span class="va">meses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Enero"</span>, <span class="st">"Febrero"</span>, <span class="st">"Marzo"</span>, <span class="st">"Abril"</span>,
           <span class="st">"Mayo"</span>, <span class="st">"Junio"</span>, <span class="st">"Julio"</span>, <span class="st">"Agosto"</span>,
           <span class="st">"Septiembre"</span>, <span class="st">"Octubre"</span>, <span class="st">"Noviembre"</span>, <span class="st">"Diciembre"</span><span class="op">)</span>
<span class="co"># Crear un vector caracter con los tipos de habitación</span>
<span class="va">tipos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Simple"</span>, <span class="st">"Doble"</span>, <span class="st">"Triple"</span><span class="op">)</span></code></pre></div>
<p>Siendo que el número total de reservas que se debe colocar en la última celda del cuadro coincide con el total de filas en <code>datos</code>, ya tenemos todos los elementos necesarios para mostrar el cuadro pedido, cuya construcción será indicada con el siguiente bloque de pseudocódigo:</p>
<pre><code># Pseudocódigo
MOSTRAR CUADRO
  CUERPO tabla
  ANEXAR FILA total_col
  ANEXAR COLUMNA total_fila NFILA(datos)
  NOMBRES FILAS meses "Total"
  NOMBRES COLUMNAS  tipos "Total"
FIN MOSTRAR CUADRO</code></pre>
<p>Comenzando por el cuerpo principal del cuadro que es la matriz <code>tabla</code>, la sentencia <code>ANEXAR FILA total_col</code> implica que hay que agregarle una fila por debajo, con los valores guardados en <code>total_col</code>. Luego, indicamos que esto debe ser concatenado agregándole una columna a la derecha con la sentencia <code>ANEXAR COLUMNA total_fila NFILA(datos)</code>. Esta nueva columna estará formada por los valores de <code>total_fila</code>, seguido por el valor guardado en <code>NFILA(datos)</code>. De esta manera, todas las dimensiones de los elementos que estamos uniendo coinciden.</p>
<p>Finalmente, indicamos que el cuadro así construido debe ser mostrado con ciertos nombres o etiquetas para sus filas y columnas. Por ejemplo, <code>NOMBRES FILAS meses "Total"</code> señala que los nombres de las filas están determinados por los valores guardados en el vector <code>meses</code> y el valor de tipo caracter <code>"Total"</code>.</p>
<p>Lo anterior es suficiente como para expresar la idea de cómo tiene que ser el cuadro, pero al traducirlo a R tendremos que ser más específicos. Por ejemplo, la acción de anexar se puede realizar uniendo vectores y/o marices con las funciones <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> (<em>row bind</em>, unir filas) o <code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> (<em>column bind</em>, unir columnas). Veamos el siguiente ejemplo pequeño:</p>
<div class="sourceCode" id="cb430"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Concatenar verticalmente, es decir, unir por columnas:</span>
<span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">X</span></code></pre></div>
<pre><code>     [,1] [,2]
[1,]    1    3
[2,]    2    4</code></pre>
<div class="sourceCode" id="cb432"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">:</span><span class="fl">6</span>
<span class="va">Y</span></code></pre></div>
<pre><code>[1] 5 6</code></pre>
<div class="sourceCode" id="cb434"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">W</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Y</span><span class="op">)</span>
<span class="va">W</span></code></pre></div>
<pre><code>         Y
[1,] 1 3 5
[2,] 2 4 6</code></pre>
<div class="sourceCode" id="cb436"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Concatenar horizontalmente, es decir, unir por fila. </span>
<span class="co"># A W se le agrega una fila compuesta por los elementos de Z y el número 9:</span>
<span class="va">Z</span> <span class="op">&lt;-</span> <span class="fl">7</span><span class="op">:</span><span class="fl">8</span>
<span class="va">Z</span></code></pre></div>
<pre><code>[1] 7 8</code></pre>
<div class="sourceCode" id="cb438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">W</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Z</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>         Y
[1,] 1 3 5
[2,] 2 4 6
[3,] 7 8 9</code></pre>
<p>Entonces, para unir los conteos que están en <code>tabla</code> con los totales marginales y el total general, tenemos que hacer:</p>
<div class="sourceCode" id="cb440"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Concatenar la tabla con los totales por fila y llamarlo "cuadro"</span>
<span class="va">cuadro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">tabla</span>, <span class="va">total_fila</span><span class="op">)</span>
<span class="va">cuadro</span></code></pre></div>
<pre><code>                  total_fila
 [1,] 200 129  72        401
 [2,] 202  98  80        380
 [3,] 131  70  35        236
 [4,] 113  61  40        214
 [5,] 169  91  61        321
 [6,] 139  78  61        278
 [7,] 298 179 112        589
 [8,] 105  85  41        231
 [9,] 138  95  35        268
[10,] 181  99  67        347
[11,]  99  68  36        203
[12,] 200 119  66        385</code></pre>
<div class="sourceCode" id="cb442"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Concatenar el cuadro con los totales por columna y el total general</span>
<span class="va">cuadro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">cuadro</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">total_col</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">cuadro</span></code></pre></div>
<pre><code>                    total_fila
 [1,]  200  129  72        401
 [2,]  202   98  80        380
 [3,]  131   70  35        236
 [4,]  113   61  40        214
 [5,]  169   91  61        321
 [6,]  139   78  61        278
 [7,]  298  179 112        589
 [8,]  105   85  41        231
 [9,]  138   95  35        268
[10,]  181   99  67        347
[11,]   99   68  36        203
[12,]  200  119  66        385
[13,] 1975 1172 706       3853</code></pre>
<p>Ahora podemos agregarle nombres a las columnas y a las filas. Para esto debemos definir una <em>lista</em>, que se le asigna al objeto <code>cuadro</code> como atributo mediante la función <code><a href="https://rdrr.io/r/base/dimnames.html">dimnames()</a></code>:</p>
<div class="sourceCode" id="cb444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html">dimnames</a></span><span class="op">(</span><span class="va">cuadro</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Mes"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">meses</span>, <span class="st">"Total"</span><span class="op">)</span>, 
                         <span class="st">"Tipo de habitación"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tipos</span>, <span class="st">"Total"</span><span class="op">)</span> <span class="op">)</span>
<span class="va">cuadro</span></code></pre></div>
<pre><code>            Tipo de habitación
Mes          Simple Doble Triple Total
  Enero         200   129     72   401
  Febrero       202    98     80   380
  Marzo         131    70     35   236
  Abril         113    61     40   214
  Mayo          169    91     61   321
  Junio         139    78     61   278
  Julio         298   179    112   589
  Agosto        105    85     41   231
  Septiembre    138    95     35   268
  Octubre       181    99     67   347
  Noviembre      99    68     36   203
  Diciembre     200   119     66   385
  Total        1975  1172    706  3853</code></pre>
</div>
<div id="b-determinar-el-total-de-pernoctaciones-en-el-hotel-durante-el-2019" class="section level3" number="6.4.4">
<h3>
<span class="header-section-number">6.4.4</span> b) Determinar el total de pernoctaciones en el hotel durante el 2019<a class="anchor" aria-label="anchor" href="#b-determinar-el-total-de-pernoctaciones-en-el-hotel-durante-el-2019"><i class="fas fa-link"></i></a>
</h3>
<p>Como dijimos antes, el total de pernoctaciones es la suma de las cantidades de noches de cada reserva y a esto ya lo calculamos en la variable <code>pernoc</code> mientras recorrimos todos los registros del dataset. Solamente tenemos que mostrar el resultado:</p>
<pre><code># Pseudocódigo
ESCRIBIR "El número total de pernoctaciones en el hotel durante el 2019 fue", pernoc</code></pre>
<div class="sourceCode" id="cb447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># En R</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"El número total de pernoctaciones en el hotel durante el 2019 fue"</span>, <span class="va">pernoc</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<pre><code>El número total de pernoctaciones en el hotel durante el 2019 fue 19323 </code></pre>
</div>
<div id="c-determinar-cuál-fue-el-mes-de-mayor-cantidad-de-reservas" class="section level3" number="6.4.5">
<h3>
<span class="header-section-number">6.4.5</span> c) Determinar cuál fue el mes de mayor cantidad de reservas<a class="anchor" aria-label="anchor" href="#c-determinar-cu%C3%A1l-fue-el-mes-de-mayor-cantidad-de-reservas"><i class="fas fa-link"></i></a>
</h3>
<p>Para lograr este objetivo tenemos que ver cuál es el valor máximo en el vector <code>total_fila</code>. Dado que el mismo tiene la cantidad total de reservas hecha en cada mes, saber en qué posición de este vector se encuentra el máximo nos permitirá determinar de qué mes se trata.</p>
<p>Si prestamos atención nos daremos cuenta que este tipo de problema ya lo hemos resuelto en la práctica 4, en la cual hemos escrito una función llamada <code>maximo()</code> que devolvía como resultado tanto el valor máximo en un vector como su posición en el mismo. Entonces, podemos invocar a dicho subalgoritmo:</p>
<pre><code># Pseudocódigo
res &lt;- maximo(total_fila)
ESCRIBIR "El mes de mayor cantidad de reservas fue", meses[res[2]], "con", res[1], "reservas."</code></pre>
<p>Si recordamos la definición de la función <code>maximo()</code>, veremos que el resultado arrojado, <code>res</code>, es un vector de 2 elementos: el primero, <code>res[1]</code>, tiene el valor del máximo, mientras que el segundo, <code>res[2]</code>, tiene el valor de su posición. Por ejemplo, si <code>res[2]</code> vale 7, significa que el máximo está en la posición 7, es decir, en el mes de julio. Como <code>meses</code> es un vector que guarda todos los nombres de los meses, indicar <code>meses[res[2]]</code> sería equivalente a hacer <code>meses[7]</code> que devuelve el valor <code>Julio</code>. De esta manera se pudo construir el mensaje mostrado.</p>
<p>En R tenemos que recordar que la función <code>maximo()</code> debe existir en nuestro ambiente de trabajo para poder utilizarla. Para esto, tenemos que agregarla a nuestro script y correrla con anterioridad de ejecutar el resto del código, aunque sería más recomendable guardar esta y cualquier otra función que necesitemos en un archivo auxiliar de código de R. De esta forma, el script en el que estamos escribiendo nuestro programa principal queda más limpio y ordenado. Para ejecutar el archivo de código adicional con las funciones que deben ser creadas, podemos hacer uso desde nuestro script principal de la función <code><a href="https://rdrr.io/r/base/source.html">source()</a></code>, indicando entre los paréntesis el camino hacia dicho archivo de funciones auxiliares:</p>
<div class="sourceCode" id="cb450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"/home/marcos/GitProjects/introprog/archivos/funciones.R"</span><span class="op">)</span></code></pre></div>
<p>En el archivo <code>funciones.R</code> se encuentra la definición de la función <code>maximo()</code>, la cual ahora está lista para ser usada:</p>
<div class="sourceCode" id="cb451"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">maximo</span><span class="op">(</span><span class="va">total_fila</span><span class="op">)</span>

<span class="co"># Ver el contenido de res: valor del máximo</span>
<span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>[1] 589</code></pre>
<div class="sourceCode" id="cb453"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ver el contenido de res: posición del máximo</span>
<span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>[1] 7</code></pre>
<div class="sourceCode" id="cb455"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Mes que le corresponde al máximo</span>
<span class="va">meses</span><span class="op">[</span><span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>[1] "Julio"</code></pre>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generar el mensaje</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"El mes de mayor cantidad de reservas fue"</span>, <span class="va">meses</span><span class="op">[</span><span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"con"</span>, 
    <span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"reservas.\n"</span><span class="op">)</span></code></pre></div>
<pre><code>El mes de mayor cantidad de reservas fue Julio con 589 reservas.</code></pre>
</div>
<div id="d-determinar-para-cada-tipo-de-habitación-el-mes-con-menor-número-de-reservas" class="section level3" number="6.4.6">
<h3>
<span class="header-section-number">6.4.6</span> d) Determinar para cada tipo de habitación el mes con menor número de reservas<a class="anchor" aria-label="anchor" href="#d-determinar-para-cada-tipo-de-habitaci%C3%B3n-el-mes-con-menor-n%C3%BAmero-de-reservas"><i class="fas fa-link"></i></a>
</h3>
<p>Para resolver este último punto tenemos que identificar que lo que se pide es buscar el mínimo valor en cada columna de la matriz <code>tabla</code>. La fila en la que se encuentra el mínimo corresponde al mes en el cual se ha presentado el menor número de reservas en cada tipo de habitación. Nuevamente, debemos recordar que en la Práctica 4 hemos escrito un subalgoritmo que se encarga justamente de esto. La función <code>minimo_matriz_col</code> identifica el mínimo en una columna en particular de una matriz e informa también en qué fila se encuentra, justo lo que necesitamos. Como lo tenemos que hacer una vez para cada tipo de habitación, es decir, una vez para cada columna, podemos encerrar esto en una estructura iterativa:</p>
<pre><code>PARA j DESDE 1 HASTA 3 HACER
  res &lt;- minimo_matriz_col(tabla, j)
  ESCRIBIR "Para las habitaciones de tipo", tipos[j], 
           "el mes con menor número de reservas fue", meses[res[2]], 
           "con", res[1], "reservas."
FIN PARA</code></pre>
<div class="sourceCode" id="cb460"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">minimo_matriz_col</span><span class="op">(</span><span class="va">tabla</span>, <span class="va">j</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Para las habitaciones de tipo"</span>, <span class="va">tipos</span><span class="op">[</span><span class="va">j</span><span class="op">]</span>, 
        <span class="st">"el mes con menor \n    número de reservas fue"</span>, 
        <span class="va">meses</span><span class="op">[</span><span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"con"</span>, <span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"reservas.\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>Para las habitaciones de tipo Simple el mes con menor 
    número de reservas fue Noviembre con 99 reservas.
Para las habitaciones de tipo Doble el mes con menor 
    número de reservas fue Abril con 61 reservas.
Para las habitaciones de tipo Triple el mes con menor 
    número de reservas fue Marzo con 35 reservas.</code></pre>
</div>
<div id="solución-completa" class="section level3" number="6.4.7">
<h3>
<span class="header-section-number">6.4.7</span> Solución completa<a class="anchor" aria-label="anchor" href="#soluci%C3%B3n-completa"><i class="fas fa-link"></i></a>
</h3>
<p>Ahora estamos en condiciones de juntar las piezas de este gran rompecabezas y presentar la solución completa al problema, tanto su algortimo como su código en R:</p>
<pre class="text"><code>ALGORITMO: "Análisis de las reservas en un famoso hotel de Rosario durante el año 2019"
COMENZAR
    
  VARIABLE numérica pernoc, tipohab, mes,tabla(12, 3), total_fila(12), total_col(3), res(2)
  VARIABLE caracter tipos(3), meses(12)

  # Lectura de registros en el archivo
  ABRIR ARCHIVO (reservas) secuencial, lectura
  LEER REGISTROS (reservas) A DATASET (datos)
  CERRAR ARCHIVO (reservas)
  ESCRIBIR "El archivo cuenta con" NFILA(datos) "registros de" NCOL(datos) "campos." 

  # Recorrer todos los registros para obtener la info necesaria
  pernoc &lt;- 0
  PARA i DESDE 1 HASTA NFILA(datos) HACER
    
    tipohab &lt;- datos[i, 1]
    mes &lt;- datos[i, 2]
    noches &lt;- datos[i, 3]
    
    tabla[mes, tipohab] &lt;- tabla[mes, tipohab] + 1
    pernoc &lt;- pernoc + noches
    total_fila[mes] &lt;- total_fila[mes] + 1
    total_col[tipohab] &lt;- total_col[tipohab] + 1
    
  FIN PARA

  # a) Mostrar la tabla
  tipos[1] &lt;- "Simple"
  tipos[2] &lt;- "Doble"
  tipos[3] &lt;- "Triple"
  meses[1] &lt;- "Enero"
  ...
  meses[12] &lt;- "Diciembre"
  MOSTRAR CUADRO
    CUERPO tabla
    ANEXAR FILA total_col
    ANEXAR COLUMNA total_fila NFILA(datos)
    NOMBRES FILAS meses "Total"
    NOMBRES COLUMNAS  tipos "Total"
  FIN MOSTRAR CUADRO

  # b) Determinar el total de pernoctaciones en el hotel durante el 2019
  ESCRIBIR "El número total de pernoctaciones en el hotel durante el 2019 fue", pernoc

  # c) Determinar cuál fue el mes de mayor cantidad de reservas
  res &lt;- maximo(total_fila)
  ESCRIBIR "El mes de mayor cantidad de reservas fue", meses[res[2]], "con", res[1], "reservas."

  # d) Determinar para cada tipo de habitación el mes con menor número de reservas
  PARA j DESDE 1 HASTA 3 HACER
    res &lt;- minimo_matriz_col(tabla, j)
    ESCRIBIR "Para las habitaciones de tipo", tipos[j], "el mes con menor número de reservas fue", meses[res[2]], "con", res[1], "reservas."
  FIN PARA
   
FIN</code></pre>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Correr archivo con funciones creadas anteriormente</span>
<span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"/home/marcos/GitProjects/introprog/archivos/funciones.R"</span><span class="op">)</span>

<span class="co"># Leer archivo</span>
<span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span><span class="op">(</span><span class="st">"/home/marcos/GitProjects/introprog/archivos/reservas.txt"</span><span class="op">)</span>

<span class="co"># Programa: "Análisis de las reservas en un famoso hotel de Rosario durante el año 2019"</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">total_fila</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span>
<span class="va">total_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="va">pernoc</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">tipohab</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">1</span><span class="op">]</span>
    <span class="va">mes</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">2</span><span class="op">]</span>
    <span class="va">noches</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="va">i</span>, <span class="fl">3</span><span class="op">]</span>
    
    <span class="va">tabla</span><span class="op">[</span><span class="va">mes</span>, <span class="va">tipohab</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">tabla</span><span class="op">[</span><span class="va">mes</span>, <span class="va">tipohab</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="va">pernoc</span> <span class="op">&lt;-</span> <span class="va">pernoc</span> <span class="op">+</span> <span class="va">noches</span>
    <span class="va">total_fila</span><span class="op">[</span><span class="va">mes</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">total_fila</span><span class="op">[</span><span class="va">mes</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="va">total_col</span><span class="op">[</span><span class="va">tipohab</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">total_col</span><span class="op">[</span><span class="va">tipohab</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    
<span class="op">}</span>

<span class="co"># a) Mostrar la tabla</span>
<span class="co"># Crear un vector caracter con todos los nombres de los meses</span>
<span class="va">meses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Enero"</span>, <span class="st">"Febrero"</span>, <span class="st">"Marzo"</span>, <span class="st">"Abril"</span>,
           <span class="st">"Mayo"</span>, <span class="st">"Junio"</span>, <span class="st">"Julio"</span>, <span class="st">"Agosto"</span>,
           <span class="st">"Septiembre"</span>, <span class="st">"Octubre"</span>, <span class="st">"Noviembre"</span>, <span class="st">"Diciembre"</span><span class="op">)</span>
<span class="co"># Crear un vector caracter con los tipos de habitación</span>
<span class="va">tipos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Simple"</span>, <span class="st">"Doble"</span>, <span class="st">"Triple"</span><span class="op">)</span>
<span class="co"># Concatenar la tabla con los totales por fila y llamarlo "cuadro"</span>
<span class="va">cuadro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">tabla</span>, <span class="va">total_fila</span><span class="op">)</span>
<span class="co"># Concatenar el cuadro con los totales por columna y el total general</span>
<span class="va">cuadro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">cuadro</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">total_col</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dimnames.html">dimnames</a></span><span class="op">(</span><span class="va">cuadro</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Mes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">meses</span>, <span class="st">"Total"</span><span class="op">)</span>, 
                         <span class="st">"Tipo de habitación"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tipos</span>, <span class="st">"Total"</span><span class="op">)</span> <span class="op">)</span>
<span class="co"># Mostrar el resultado</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Número de reservas durante el 2019 según mes y tipo de habitación\n"</span><span class="op">)</span>
<span class="va">cuadro</span>

<span class="co"># b) Determinar el total de pernoctaciones en el hotel durante el 2019</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"\nEl número total de pernoctaciones en el hotel durante el 2019 fue"</span>, <span class="va">pernoc</span>, <span class="st">"\n\n"</span><span class="op">)</span>

<span class="co"># c) Determinar cuál fue el mes de mayor cantidad de reservas</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">maximo</span><span class="op">(</span><span class="va">total_fila</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"El mes de mayor cantidad de reservas fue"</span>, <span class="va">meses</span><span class="op">[</span><span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"con"</span>, 
    <span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"reservas.\n\n"</span><span class="op">)</span>

<span class="co"># d) Determinar para cada tipo de habitación el mes con menor número de reservas</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">minimo_matriz_col</span><span class="op">(</span><span class="va">tabla</span>, <span class="va">j</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Para las habitaciones de tipo"</span>, <span class="va">tipos</span><span class="op">[</span><span class="va">j</span><span class="op">]</span>, 
        <span class="st">"el mes con menor\n     número de reservas fue"</span>, 
        <span class="va">meses</span><span class="op">[</span><span class="va">res</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"con"</span>, <span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"reservas.\n"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>Número de reservas durante el 2019 según mes y tipo de habitación
            Tipo de habitación
Mes          Simple Doble Triple Total
  Enero         200   129     72   401
  Febrero       202    98     80   380
  Marzo         131    70     35   236
  Abril         113    61     40   214
  Mayo          169    91     61   321
  Junio         139    78     61   278
  Julio         298   179    112   589
  Agosto        105    85     41   231
  Septiembre    138    95     35   268
  Octubre       181    99     67   347
  Noviembre      99    68     36   203
  Diciembre     200   119     66   385
  Total        1975  1172    706  3853

El número total de pernoctaciones en el hotel durante el 2019 fue 19323 

El mes de mayor cantidad de reservas fue Julio con 589 reservas.

Para las habitaciones de tipo Simple el mes con menor
     número de reservas fue Noviembre con 99 reservas.
Para las habitaciones de tipo Doble el mes con menor
     número de reservas fue Abril con 61 reservas.
Para las habitaciones de tipo Triple el mes con menor
     número de reservas fue Marzo con 35 reservas.</code></pre>
</div>
</div>
<div id="creación-de-archivos-y-escritura-de-resultados" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Creación de archivos y escritura de resultados<a class="anchor" aria-label="anchor" href="#creaci%C3%B3n-de-archivos-y-escritura-de-resultados"><i class="fas fa-link"></i></a>
</h2>
<p>Anteriormente hemos mencionado que cuando trabajamos con archivos podemos realizar acciones tanto de lectura como de escritura, aunque hasta el momento nos hemos limitado a leer registros de un archivo. En este apartado presentamos cómo crear un archivo de texto desde R, de manera que pueda utilizarse para escribir y guardar allí los resultados obtenidos.</p>
<div id="crear-un-archivo-para-guardar-resultados" class="section level3" number="6.5.1">
<h3>
<span class="header-section-number">6.5.1</span> Crear un archivo para guardar resultados<a class="anchor" aria-label="anchor" href="#crear-un-archivo-para-guardar-resultados"><i class="fas fa-link"></i></a>
</h3>
<p>La función <code><a href="https://rdrr.io/r/base/sink.html">sink()</a></code> permite escribir en un archivo de texto todos los resultados que habitualmente vemos en la consola de R. Sus argumentos son:</p>
<ul>
<li>
<code>file</code>: nombre del archivo, si no existe será creado. Se guarda en el directorio de trabajo actual, a menos que indiquemos aquí la ruta completa hacia otra carpeta.</li>
<li>
<code>append</code>: si el archivo ya existía, por default lo sobreescribe (borra lo anterior), a menos que indiquemos <code>append = TRUE</code> para que agregue nuevas línea sin borrar nada.</li>
<li>
<code>split</code>: por default mientras la conexión al archivo está activa, los resultados que enviamos al mismo no se muestran en la consola de R, a menos que indiquemos <code>split = TRUE</code>, en cuyo caso sucederán ambas cosas: los resultados serán escritos en el archivo y se verán en la consola.</li>
</ul>
<p>Cuando se desea cerrar la conexión al archivo, se debe correr <code><a href="https://rdrr.io/r/base/sink.html">sink()</a></code> sin ningún argumento. Todo lo que <em>imprimamos</em> con <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> entre ambos llamados a <code><a href="https://rdrr.io/r/base/sink.html">sink()</a></code> se guardará en el archivo. Veamos un ejemplo:</p>
<div class="sourceCode" id="cb465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">5</span>
<span class="fu"><a href="https://rdrr.io/r/base/sink.html">sink</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"salida.txt"</span>, append <span class="op">=</span> <span class="cn">TRUE</span>, split <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"==========================================\n"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"            ARCHIVO DE RESULTADOS         \n"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"==========================================\n\n"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"El valor de b es"</span>, <span class="va">b</span>, <span class="st">", mientras que d vale "</span>, <span class="va">d</span>, <span class="st">"\n\n"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Esta es la matriz a:\n\n"</span><span class="op">)</span>
<span class="va">a</span>
<span class="fu"><a href="https://rdrr.io/r/base/sink.html">sink</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Así luce el archivo <code>salida.txt</code>:</p>
<pre><code>==========================================
            ARCHIVO DE RESULTADOS         
==========================================

El valor de b es  3, mientras que d vale 5 

Esta es la matriz a:
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
<p>Se deja propuesto como ejercicio implementar esto en el ejemplo anterior, para que los resultados del análisis de las reservas se guarden en un archivo de texto.</p>
</div>
<div id="crear-un-archivo-para-guardar-conjuntos-de-datos-línea-por-línea" class="section level3" number="6.5.2">
<h3>
<span class="header-section-number">6.5.2</span> Crear un archivo para guardar conjuntos de datos, línea por línea<a class="anchor" aria-label="anchor" href="#crear-un-archivo-para-guardar-conjuntos-de-datos-l%C3%ADnea-por-l%C3%ADnea"><i class="fas fa-link"></i></a>
</h3>
<p>En algunas oportunidades con nuestro trabajo modificamos o generamos nuevos conjuntos de datos o tablas que queremos guardar y para esto necesitamos crear un nuevo archivo. Supongamos que, por ejemplo, como parte de nuestro algoritmo tenemos un dataset llamado <code>datos</code> con 4 columnas, cuyo contenido deseamos que sea escrito y guardado en un archivo llamado <code>mi_archivo.txt</code>. Siguiendo las convenciones indicadas en la sección 6.3, esto puede ser incorporado en el pseudocódigo de esta forma:</p>
<pre><code>CREAR ARCHIVO (mi_archivo)
ABRIR ARCHIVO (mi_archivo) secuencial, de salida
PARA i DESDE 1 HASTA NFILA(datos) HACER
    ESCRIBIR REGISTRO (mi_archivo) datos[i, 1] datos[i, 2] datos[i, 3] datos[i, 4]
FIN PARA
CERRAR ARCHIVO (mi_archivo)</code></pre>
<p>En R podemos cumplir este objetivo usando tan solo la ya muy conocida función <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code>, pero con algunos argumentos adicionales. En <code>file =</code> indicamos el nombre del archivo donde queremos escribir. Si el mismo no existe previamente, será creado al correr <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code>. Con <code>sep = "\t"</code> establecemos que los distintos valores a imprimir estarán separados por tabulaciones (podría ser <code>sep = ","</code> si queremos generar un archivo de extensión <code>.csv</code>). Con <code>fill = TRUE</code> nos aseguramos que lo que se imprima en el mismo archivo más tarde con otro llamado a <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> se coloque en una línea nueva por debajo. Sabiendo todo esto, podemos crear un nuevo archivo de datos de esta forma:</p>
<div class="sourceCode" id="cb468"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"campo1"</span>, <span class="st">"campo2"</span>, <span class="st">"campo3"</span>, <span class="st">"campo4"</span>, file <span class="op">=</span> <span class="st">"mi_archivo.txt"</span>, sep <span class="op">=</span> <span class="st">"\t"</span>, fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Por ahora el archivo sólo tiene una línea con los nombres de los campos, pero todavía no tiene ningún dato. Si quisiera escribir un primer registro, puedo hacer, por ejemplo:</p>
<div class="sourceCode" id="cb469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fl">23</span>, <span class="fl">1</span>, <span class="st">"hola"</span>, <span class="fl">985</span>, file <span class="op">=</span> <span class="st">"mi_archivo.txt"</span>, sep <span class="op">=</span> <span class="st">"\t"</span>, fill <span class="op">=</span> <span class="cn">TRUE</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>El argumento <code>append = TRUE</code> hace que no se borre lo que hayamos escrito antes. Luego de esta sentencia, el archivo luce así:</p>
<pre><code>campo1  campo2  campo3  campo4
23      1       hola    985 </code></pre>
<p>Claramente, se debe proceder de manera análoga, tal vez haciendo uso de alguna estructura iterativa, para agregar todos los registros que se deseen en el archivo.</p>
</div>
<div id="crear-un-archivo-para-guardar-conjuntos-de-datos-todos-los-registros-juntos" class="section level3" number="6.5.3">
<h3>
<span class="header-section-number">6.5.3</span> Crear un archivo para guardar conjuntos de datos, todos los registros juntos<a class="anchor" aria-label="anchor" href="#crear-un-archivo-para-guardar-conjuntos-de-datos-todos-los-registros-juntos"><i class="fas fa-link"></i></a>
</h3>
<p>Si bien lo anterior sigue la estructura planteada en el pseudocódigo, R provee una gran variedad de funciones para guardar todo el contenido de un objeto de tipo <code>data.frame</code> en un archivo de una sola vez, como se muestra en los ejemplos que siguen, en los cuales suponemos que deseamos guardar el contenido de un <code>data.frame</code> llamado <code>mis_datos</code> en un archivo llamado <code>mi_archivo</code>:</p>
<div class="sourceCode" id="cb471"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Guardarlo en un archivo de texto separado por tabulaciones</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">mis_datos</span>, <span class="st">"mi_archivo.txt"</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span>

<span class="co"># Guardarlo en un archivo de texto separado por comas</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">mis_datos</span>, <span class="st">"mi_archivo.txt"</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Guardarlo en un archivo de Excel</span>
<span class="co"># install.packages("writexl")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/writexl/">writexl</a></span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html">write_xlsx</a></span><span class="op">(</span><span class="va">mis_datos</span>, <span class="st">"mi_archivo.xlsx"</span><span class="op">)</span></code></pre></div>

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="estructuras-de-datos.html"><span class="header-section-number">5</span> Estructuras de Datos</a></div>
<div class="next"><a href="otros-t%C3%B3picos.html"><span class="header-section-number">7</span> Otros tópicos</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="En esta página"><h2>En esta página</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#uso-de-archivos-de-datos"><span class="header-section-number">6</span> Uso de archivos de datos</a></li>
<li><a class="nav-link" href="#registros-campos-claves-y-bases-de-datos"><span class="header-section-number">6.1</span> Registros, campos, claves y bases de datos</a></li>
<li><a class="nav-link" href="#organizaci%C3%B3n-de-archivos"><span class="header-section-number">6.2</span> Organización de archivos</a></li>
<li><a class="nav-link" href="#operaciones-sobre-archivos"><span class="header-section-number">6.3</span> Operaciones sobre archivos</a></li>
<li>
<a class="nav-link" href="#ejemplo"><span class="header-section-number">6.4</span> Ejemplo</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#lectura-de-los-registros-del-archivo"><span class="header-section-number">6.4.1</span> Lectura de los registros del archivo</a></li>
<li><a class="nav-link" href="#recorrer-todos-los-registros-para-obtener-la-info-necesaria"><span class="header-section-number">6.4.2</span> Recorrer todos los registros para obtener la info necesaria</a></li>
<li><a class="nav-link" href="#a-mostrar-el-cuadro"><span class="header-section-number">6.4.3</span> a) Mostrar el cuadro</a></li>
<li><a class="nav-link" href="#b-determinar-el-total-de-pernoctaciones-en-el-hotel-durante-el-2019"><span class="header-section-number">6.4.4</span> b) Determinar el total de pernoctaciones en el hotel durante el 2019</a></li>
<li><a class="nav-link" href="#c-determinar-cu%C3%A1l-fue-el-mes-de-mayor-cantidad-de-reservas"><span class="header-section-number">6.4.5</span> c) Determinar cuál fue el mes de mayor cantidad de reservas</a></li>
<li><a class="nav-link" href="#d-determinar-para-cada-tipo-de-habitaci%C3%B3n-el-mes-con-menor-n%C3%BAmero-de-reservas"><span class="header-section-number">6.4.6</span> d) Determinar para cada tipo de habitación el mes con menor número de reservas</a></li>
<li><a class="nav-link" href="#soluci%C3%B3n-completa"><span class="header-section-number">6.4.7</span> Solución completa</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#creaci%C3%B3n-de-archivos-y-escritura-de-resultados"><span class="header-section-number">6.5</span> Creación de archivos y escritura de resultados</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#crear-un-archivo-para-guardar-resultados"><span class="header-section-number">6.5.1</span> Crear un archivo para guardar resultados</a></li>
<li><a class="nav-link" href="#crear-un-archivo-para-guardar-conjuntos-de-datos-l%C3%ADnea-por-l%C3%ADnea"><span class="header-section-number">6.5.2</span> Crear un archivo para guardar conjuntos de datos, línea por línea</a></li>
<li><a class="nav-link" href="#crear-un-archivo-para-guardar-conjuntos-de-datos-todos-los-registros-juntos"><span class="header-section-number">6.5.3</span> Crear un archivo para guardar conjuntos de datos, todos los registros juntos</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introducción a la Programación</strong>: Guía de estudio - Lic. en Estadística - FCEyE - UNR" was written by Mgs. Lic. Marcos Prunello (Prof. Tit. Ord.). It was last built on 2022-03-09.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
